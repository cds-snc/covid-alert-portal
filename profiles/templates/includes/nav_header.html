{% load i18n %}
{% load language_switcher %}
<nav class="nav--header" aria-label="{% trans 'Language and account navigation' %}">
  <ul>
    <li>
      {% get_current_language as LANGUAGE_CODE %}
      {% get_language_info for "en" as langEn %}
      {% get_language_info for "fr" as langFr %}

      <form id="language_toggle" action="{% url 'set_language' %}" method="post">{% csrf_token %}
        <h2 class="visually-hidden">{% trans "Language selection" }</h2>
        {% if LANGUAGE_CODE == 'en' %}
          <input type="hidden" name="language" value="{{ langFr.code }}" />
          {% lang_switch langFr %}
        {% else %}
          <input type="hidden" name="language" value="{{ langEn.code }}" />
          {% lang_switch langEn %}
        {% endif %}
      </form>
    </li>
    {% if user.is_authenticated %}
      <li><a href="{% url 'user_profile' user.id %}">{{ user.email }}</a></li>
      <li><a href="{% url 'logout' %}">{% trans 'Log out' %}</a></li>
    {% else %}
      <li><a href="{% url 'login' %}">{% trans 'Log in' %}</a></li>
    {% endif %}
  </ul>
</nav>
